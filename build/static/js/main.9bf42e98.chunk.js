(this.webpackJsonpbilforum=this.webpackJsonpbilforum||[]).push([[0],{40:function(e,t,c){},55:function(e,t,c){"use strict";c.r(t);var a=c(1),n=c(2),s=c.n(n),r=c(20),l=c.n(r),i=(c(40),c(10)),j=c.n(i),o=c(15),b=c(7),x=c(12),d=c(56),u=c(57),m=c(58),h=c(59),O=c(60),p=c(61),f=Object(n.createContext)(),v=function(e){var t=Object(n.useState)(null),c=Object(b.a)(t,2),s=c[0],r=c[1];Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("token"));e&&r(e)}),[]);var l={user:s,setUser:r};return Object(a.jsx)(f.Provider,{value:l,children:e.children})},g=function(e){var t=Object(n.useState)(!1),c=Object(b.a)(t,2),s=c[0],r=c[1],l=Object(n.useContext)(f),i=l.user,v=l.setUser,g=function(){var e=Object(o.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/logout");case 2:v(null),localStorage.removeItem("token");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsx)(d.a,{className:"px-0 mx-0 bg-light",fluid:!0,children:Object(a.jsx)(d.a,{className:"mx-auto px-2",children:Object(a.jsxs)(u.a,{light:!0,expand:"md",className:" px-3",children:[Object(a.jsx)(x.b,{className:"nav-brand",to:"/",children:Object(a.jsx)("h3",{children:"Bil Forum"})}),Object(a.jsx)(m.a,{onClick:function(){return r(!s)}}),Object(a.jsx)(h.a,{isOpen:s,navbar:!0,children:Object(a.jsxs)(O.a,{className:"ml-auto",navbar:!0,children:[Object(a.jsx)(p.a,{className:"mr-lg-3",children:Object(a.jsx)(x.b,{to:"/about",children:"Om oss"})}),i?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(p.a,{className:"mr-lg-3",children:Object(a.jsx)(x.b,{to:"/mypage",children:"Mina sidor"})}),Object(a.jsx)(p.a,{children:Object(a.jsx)(x.b,{onClick:g,to:"/",children:"Logga ut"})})]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(p.a,{className:"mr-lg-3",children:Object(a.jsx)(x.b,{to:"/signup",children:"Bli medlem"})}),Object(a.jsx)(p.a,{children:Object(a.jsx)(x.b,{to:"/signin",children:"Logga in"})})]})]})})]})})})},N=c(62),y=c(63);function S(){return Object(a.jsx)(d.a,{className:"footer",fluid:!0,children:Object(a.jsx)(N.a,{className:"bg-light mt-5",children:Object(a.jsx)(y.a,{lg:"123",className:"mx-auto py-5",children:Object(a.jsx)("div",{style:{textAlign:"center"},children:Object(a.jsxs)("ul",{className:"nav",children:[Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)("a",{className:"nav-link",href:"https://www.facebook.com/khajehabdollahi/",children:"Facebook"})}),Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)("a",{className:"nav-link",href:"#",children:"Instagram"})}),Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)("a",{className:"nav-link",href:"https://www.youtube.com/c/SvenskaSwedish",children:"Youtube"})}),Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)("a",{className:"nav-link",href:"#",children:"Address"})})]})})})})})}function k(){return Object(a.jsx)(d.a,{children:Object(a.jsx)(N.a,{children:Object(a.jsxs)(y.a,{children:[Object(a.jsx)("h1",{className:"text-center mt-5",children:"OM OSS"}),Object(a.jsx)("div",{className:"about-bg",style:{border:"2px solid #ddd"},children:Object(a.jsx)("h2",{className:"text-center mt-5 text-light om-oss",children:"Hi! Come here and discuss about CARS"})})]})})})}var C=c(33),w=Object(n.createContext)();function T(e){var t=Object(n.useState)(),c=Object(b.a)(t,2),s=c[0],r=c[1],l=Object(n.useState)(),i=Object(b.a)(l,2),x=i[0],d=i[1],u=Object(n.useState)(),m=Object(b.a)(u,2),h=m[0],O=m[1],p=function(){var e=Object(o.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/threads");case 2:return t=e.sent,e.next=5,t.json();case 5:t=e.sent,r(t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(o.a)(j.a.mark((function e(t){var c,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/threads/"+t);case 2:return c=e.sent,e.next=5,fetch("/api/threads/"+t+"/comments");case 5:return a=e.sent,e.next=8,c.json();case 8:return c=e.sent,e.next=11,a.json();case 11:a=e.sent,d(c),O(a),console.log(h);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){p()}),[]);var v={getForumText:p,threads:s,thread:x,getForumTextById:f,comments:h,appendThreads:function(e){r([].concat(Object(C.a)(s),[e]))}};return Object(a.jsx)(w.Provider,{value:v,children:e.children})}var E=function(){var e=Object(n.useContext)(w),t=e.threads,c=e.getForumTextById;return Object(a.jsxs)(d.a,{children:[Object(a.jsx)(N.a,{className:"my-3 mx-5",children:Object(a.jsxs)(y.a,{className:"my-3 mx-4",lg:"12",children:[Object(a.jsx)("h3",{className:"text-secondary text-center",children:"V\xe4lkommen till min"}),Object(a.jsx)("h1",{className:"text-info text-center",children:"FORUM"})]})}),Object(a.jsx)("hr",{}),Object(a.jsxs)(N.a,{children:[Object(a.jsx)(y.a,{className:"mt-1 px-0",lg:"4",children:function(){if(void 0!==t)return t.map((function(e,t){return Object(a.jsx)("div",{children:Object(a.jsx)(x.b,{to:"/".concat(e.topic),onClick:function(){return c(e.threadID)},style:{textDecoration:"none"},children:Object(a.jsxs)("div",{children:[Object(a.jsxs)("h4",{className:"text-muted",children:[e.topic," "]}),Object(a.jsxs)("p",{children:["Skribent : ",e.name]})]})})},"res"+t+e.theadID)}))}()}),Object(a.jsx)(y.a,{className:"home-bg mx-0 my-0",lg:"8"})]})]})},D=c(64),I=c(65),F=c(66),P=c(67),q=c(68),J=function(e){var t=Object(n.useContext)(w).getForumText,c=Object(n.useContext)(f).user,s=Object(n.useState)(""),r=Object(b.a)(s,2),l=r[0],i=r[1],j=Object(n.useState)(""),o=Object(b.a)(j,2),x=o[0],u=o[1],m=function(a){a.preventDefault();var n={topic:l,text:x,writer:c.userID};fetch("/api/threads",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(n)}).then((function(c){t(),c.ok&&(i(""),u(""),e.history.push("/"))}))};return Object(a.jsx)(d.a,{children:Object(a.jsx)(N.a,{className:"mt-5",children:Object(a.jsxs)(y.a,{lg:"6",className:"mx-auto",children:[Object(a.jsx)("h3",{children:c.name.toUpperCase()}),Object(a.jsx)("h4",{className:"text-center",children:"Skriv en post"}),Object(a.jsxs)(D.a,{onSubmit:m,className:"mt-4",children:[Object(a.jsxs)(I.a,{children:[Object(a.jsx)(F.a,{for:"exampleEmail",children:"\xc4mne"}),Object(a.jsx)(P.a,{type:"text",name:"text",id:"exampleEmail",placeholder:"Skriv \xe4mne",value:l,onChange:function(e){return i(e.target.value)},required:!0})]}),Object(a.jsxs)(I.a,{children:[Object(a.jsx)(F.a,{for:"exampleText",children:"Text Area"}),Object(a.jsx)(P.a,{type:"textarea",name:"text",id:"exampleText",value:x,onChange:function(e){return u(e.target.value)},required:!0})]}),Object(a.jsx)(q.a,{className:"btn-success",children:"Skicka"})]})]})})})},R=function(e){var t=Object(n.useState)(""),c=Object(b.a)(t,2),s=c[0],r=c[1],l=Object(n.useState)(""),i=Object(b.a)(l,2),x=i[0],u=i[1],m=Object(n.useState)(""),h=Object(b.a)(m,2),O=h[0],p=h[1],f=Object(n.useState)(""),v=Object(b.a)(f,2),g=v[0],S=v[1],k=function(){var t=Object(o.a)(j.a.mark((function t(c){var a,n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.preventDefault(),a={email:s,password:x,userRole:O,name:g},t.next=4,fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 4:return n=t.sent,t.prev=5,t.next=8,n.json();case 8:n=t.sent,e.history.push("/signin"),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),console.log("Error!");case 15:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e){return t.apply(this,arguments)}}();return Object(a.jsx)(d.a,{className:"mt-5",children:Object(a.jsx)(N.a,{children:Object(a.jsxs)(y.a,{lg:"5",className:"mx-auto",children:[Object(a.jsx)("h4",{children:"Sign up"}),Object(a.jsxs)(D.a,{onSubmit:k,children:[Object(a.jsxs)(I.a,{children:[Object(a.jsx)(F.a,{for:"exampleEmail",className:"mr-sm-2",children:"Email"}),Object(a.jsx)(P.a,{type:"email",name:"email",id:"email",placeholder:"something@idk.cool",value:s,onChange:function(e){return r(e.target.value)},required:!0})]}),Object(a.jsxs)(I.a,{children:[Object(a.jsx)(F.a,{for:"examplePassword",className:"mr-sm-2",children:"Password"}),Object(a.jsx)(P.a,{type:"password",name:"password",id:"examplePassword",placeholder:"don't tell!",value:x,onChange:function(e){return u(e.target.value)},required:!0})]}),Object(a.jsxs)(I.a,{children:[Object(a.jsx)(F.a,{for:"exampleEmail",className:"mr-sm-2",children:"Name"}),Object(a.jsx)(P.a,{type:"text",name:"text",id:"text",placeholder:"Name",value:g,onChange:function(e){return S(e.target.value)},required:!0})]}),Object(a.jsxs)(I.a,{children:[Object(a.jsx)(F.a,{for:"exampleEmail",className:"mr-sm-2",children:"Role"}),Object(a.jsxs)(P.a,{type:"select",name:"select",id:"exampleSelect",required:!0,onChange:function(e){return p(e.target.value)},children:[Object(a.jsx)("option",{value:"",children:"Select Role"}),Object(a.jsx)("option",{value:"admin",children:"Admin"}),Object(a.jsx)("option",{value:"moderator",children:"Moderator"}),Object(a.jsx)("option",{value:"basicUser",children:"Basic User"})]})]}),Object(a.jsx)(q.a,{children:"Submit"})]})]})})})},U=function(e){var t=Object(n.useContext)(f).setUser,c=Object(n.useState)(""),s=Object(b.a)(c,2),r=s[0],l=s[1],i=Object(n.useState)(""),x=Object(b.a)(i,2),u=x[0],m=x[1],h=Object(n.useState)(""),O=Object(b.a)(h,2),p=O[0],v=(O[1],Object(n.useState)("")),g=Object(b.a)(v,2),S=g[0],k=g[1],C=function(){var c=Object(o.a)(j.a.mark((function c(a){var n,s;return j.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return a.preventDefault(),n={email:r,password:u,userRole:p},c.next=4,fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 4:return s=c.sent,c.prev=5,c.next=8,s.json();case 8:null==(s=c.sent)?k("Fel email eller l\xf6senord!"):(t(s),localStorage.setItem("session",JSON.stringify(s)),e.history.push("/mypage")),c.next=15;break;case 12:c.prev=12,c.t0=c.catch(5),console.log("Error!");case 15:case"end":return c.stop()}}),c,null,[[5,12]])})));return function(e){return c.apply(this,arguments)}}();return Object(a.jsx)(d.a,{className:"mt-5",children:Object(a.jsx)(N.a,{children:Object(a.jsxs)(y.a,{lg:"5",className:"mx-auto",children:[Object(a.jsx)("h4",{className:"pb-3",children:"Sign in"}),Object(a.jsxs)(D.a,{onSubmit:C,children:[Object(a.jsxs)(I.a,{children:[Object(a.jsx)(F.a,{for:"exampleEmail",className:"mr-sm-2",children:"Email"}),Object(a.jsx)(P.a,{type:"email",name:"email",id:"email",placeholder:"something@idk.cool",value:r,onChange:function(e){return l(e.target.value)},required:!0})]}),Object(a.jsxs)(I.a,{children:[Object(a.jsx)(F.a,{for:"examplePassword",className:"mr-sm-2",children:"Password"}),Object(a.jsx)(P.a,{type:"password",name:"password",id:"examplePassword",placeholder:"don't tell!",value:u,onChange:function(e){return m(e.target.value)},required:!0})]}),Object(a.jsx)(q.a,{children:"Submit"}),Object(a.jsx)("p",{children:S})]})]})})})},A=c(8),B=c(69),M=function(e){var t=Object(n.useState)(!1),c=Object(b.a)(t,2),s=c[0],r=c[1],l=function(){return r(!s)},i=Object(n.useContext)(w),j=i.thread,o=i.comments,x=i.getForumText,u=Object(n.useContext)(f).user,m=Object(n.useState)(""),h=Object(b.a)(m,2),O=h[0],p=h[1],v=Object(n.useState)(""),g=Object(b.a)(v,2),S=g[0],k=g[1],C=function(t){t.preventDefault(),fetch("/api/threads/"+j.threadID,{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify({topic:O,text:S})}).then((function(t){t.ok&&(x(),p(""),k(""),e.history.push("/"))}))};return Object(a.jsxs)(d.a,{children:[Object(a.jsx)(N.a,{className:"mt-5",children:Object(a.jsx)(y.a,{children:j&&Object(a.jsxs)(y.a,{lg:"12",children:[Object(a.jsxs)("h4",{className:"text-secondary",children:["\xc4mne:",Object(a.jsxs)("span",{className:"text-info",children:[" ",j.topic," "]})]}),Object(a.jsxs)("p",{children:["Skribent: ",j.name]}),Object(a.jsx)("p",{className:"mt-3",style:{fontSize:"18px"},children:j.text}),Object(a.jsxs)("div",{className:"mt-5",children:[function(){if(null!==u)return Object(a.jsx)(q.a,{color:"success",className:"mr-2",children:"Comment"})}(),function(){if(null!==u&&(u.userID===j.writer||"admin"===u.userRole||"moderator"===u.userRole))return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(q.a,{color:"primary",className:"mr-2",onClick:l,children:"Edit"}),Object(a.jsx)(q.a,{color:"danger",onClick:function(){return t=j.threadID,void fetch("/api/threads/"+t,{method:"DELETE"}).then((function(t){x(),e.history.push("/")}));var t},children:"Delete"})]})}()]}),Object(a.jsx)(B.a,{in:s,tag:"h5",className:"mt-3",children:s&&Object(a.jsx)(N.a,{className:"mt-5",children:Object(a.jsx)(y.a,{lg:"12",children:Object(a.jsxs)(D.a,{onSubmit:C,children:[Object(a.jsxs)(I.a,{children:[Object(a.jsx)(F.a,{for:"exampleEmail",children:"\xc4mne"}),Object(a.jsx)(P.a,{type:"text",name:"text",id:"exampleEmail",placeholder:"Write title",defaultValue:j.topic,onChange:function(e){return p(e.target.value)},required:!0})]}),Object(a.jsxs)(I.a,{children:[Object(a.jsx)(F.a,{for:"exampleText",children:"Text Area"}),Object(a.jsx)(P.a,{type:"textarea",name:"text",id:"exampleText",defaultValue:j.text,onChange:function(e){return k(e.target.value)},required:!0})]}),Object(a.jsx)(q.a,{className:"btn-success",children:"Skicka"})]})})})})]},"key"+j.threadID)})}),Object(a.jsx)("hr",{}),Object(a.jsx)(N.a,{className:"mt-3",children:Object(a.jsxs)(y.a,{children:[Object(a.jsx)("h5",{className:"ml-3",children:"Comments"}),Object(a.jsx)("hr",{}),o&&Object(a.jsxs)(y.a,{lg:"12",className:"mt-3",children:[Object(a.jsxs)("span",{children:["Commentator: ",Object(a.jsx)("h4",{className:"text-info",children:o.name})]}),Object(a.jsx)("p",{className:"mt-3 text-dark",style:{fontSize:"18px"},children:o.commentText})]},"key"+o.commentID)]})})]})},L=c(19),V=c(34),z=function(e){var t=e.component,c=Object(V.a)(e,["component"]),s=Object(n.useContext)(f).user;return Object(a.jsx)(A.b,Object(L.a)(Object(L.a)({},c),{},{render:function(e){return s?Object(a.jsx)(t,Object(L.a)(Object(L.a)({},c),e)):Object(a.jsx)(A.a,{to:{pathname:"/",state:{from:e.location}}})}}))};var H=function(){return Object(a.jsx)("div",{className:"App",children:Object(a.jsxs)(x.a,{children:[Object(a.jsx)(T,{children:Object(a.jsxs)(v,{children:[Object(a.jsx)(g,{}),Object(a.jsx)("div",{className:"content",children:Object(a.jsxs)(A.d,{children:[Object(a.jsx)(z,{exact:!0,path:"/mypage",component:J}),Object(a.jsx)(A.b,{exact:!0,path:"/",component:E}),Object(a.jsx)(A.b,{exact:!0,path:"/signup",component:R}),Object(a.jsx)(A.b,{exact:!0,path:"/signin",component:U}),Object(a.jsx)(A.b,{exact:!0,path:"/mypage",component:J}),Object(a.jsx)(A.b,{exact:!0,path:"/about",component:k}),Object(a.jsx)(A.b,{exact:!0,path:"/:id",component:M})]})})]})}),Object(a.jsx)(S,{})]})})};c(54);l.a.render(Object(a.jsx)(s.a.Fragment,{children:Object(a.jsx)(H,{})}),document.getElementById("root"))}},[[55,1,2]]]);
//# sourceMappingURL=main.9bf42e98.chunk.js.map